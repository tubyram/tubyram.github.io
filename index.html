<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Blinds and Shutters in Southlake, TX | Laura Interiors</title>
  <meta name="description" content="Laura Interiors offers premium blinds, shutters, and shades in Southlake, TX. Contact us for high-quality window treatments and personalized service." />
  <meta name="keywords" content="Blinds Southlake TX, Shutters Southlake TX, Window Treatments Southlake TX, Roller Shades Southlake TX, Laura Interiors" />
  <meta name="author" content="Laura Interiors" />

  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
</head>

<body>
  <!-- Header Section -->
  <header class="header-container">
    <div class="header-left">
      <img src="LauraInteriorsLogo.png" alt="Laura Interiors Logo" />
    </div>
    <div class="header-center">
      <h1>Blind and Shutter Shop</h1>
      <h2>Shutters, Blinds, and Shades</h2>
      <h3>by Laura Interiors</h3>
    </div>
    <div class="header-right">
      <h2>Contact</h2>
      <p>Phone: <a href="tel:817-734-8572">817-734-8572</a></p>
      <p>Email: <a href="mailto:info@laurainteriors.com">info@laurainteriors.com</a></p>
      <p>Location: Southlake, TX</p>
      <a href="appointment.html" class="appointment-link">Click here to book an appointment</a>
    </div>
  </header>

  <!-- Gallery Section -->
  <section class="gallery-grid">
    <div class="tabs-container">
      <button class="tab" onclick="switchImages('Alta-NaturalWovenShades')">Natural Woven Shades</button>
      <button class="tab" onclick="switchImages('Norman-Shutters')">Shutters</button>
      <button class="tab" onclick="switchImages('Alta-RollerShades')">Roller Shades</button>
    </div>
    <p class="gallery-description">
      Explore our collection of premium window treatments. Click on a category to view more options.
    </p>
    <div class="grid-container" id="grid-container">
      <!-- Images will be dynamically added here -->
    </div>
  </section>

  <!-- Footer Section -->
  <footer>
    <p>&copy; 2025 Laura Interiors</p>
  </footer>

  <!-- Modal for Enlarged Image View -->
  <div id="image-modal" class="modal">
    <span class="close" onclick="closeModal()">&times;</span>
    <img class="modal-content" id="modal-image" alt="Enlarged View" />
    <button class="modal-arrow left-arrow" onclick="navigateImage(-1)">&#10094;</button>
    <button class="modal-arrow right-arrow" onclick="navigateImage(1)">&#10095;</button>
  </div>

  <!-- Gallery Scripts -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const modal = document.getElementById('image-modal');
      const gridContainer = document.getElementById('grid-container');
      const description = document.querySelector('.gallery-description');

      modal.style.display = 'none';

      let currentImageIndex = 0;
      let currentImages = [];
      let currentFolderName = '';

      function renderGrid(images) 
      {
        if (!gridContainer) {
          console.error('Grid container not found.');
          return;
        }

        gridContainer.innerHTML = '';

        if (images.length === 0) {
          const noImagesMessage = document.createElement('p');
          noImagesMessage.textContent = "No images available for this category.";
          noImagesMessage.style.textAlign = 'center';
          noImagesMessage.style.fontSize = '1.2em';
          noImagesMessage.style.color = '#666';
          gridContainer.appendChild(noImagesMessage);
          return;
        }

        images.forEach(image => {
          const img = document.createElement('img');
          img.src = `images/${currentFolderName}/${image}`;  // Relative path for production
          img.alt = `Photo of ${currentFolderName.replace(/-/g, ' ')}`; // Better alt text
          img.loading = 'lazy';
          img.onclick = () => openImage(img.src, images);
          gridContainer.appendChild(img);
        });
      }

      function openImage(src, images) 
      {
        currentImages = images;
        const srcFilename = src.split('/').slice(-1)[0];
        currentImageIndex = images.indexOf(srcFilename);
        document.getElementById('modal-image').src = src;
        modal.style.display = 'flex';
      }

      function closeModal() 
      {
        modal.style.display = 'none';
      }

      function navigateImage(direction) 
      {
        if (!currentImages.length) return;

          const modalImage = document.getElementById('modal-image');

          // Add fade-out class
          modalImage.classList.add('fade-out');
          modalImage.classList.remove('fade-in'); // Make sure to reset

          setTimeout(() => {
          // Update the current image index
            currentImageIndex = (currentImageIndex + direction + currentImages.length) % currentImages.length;

            const nextImageFilename = currentImages[currentImageIndex];
            const nextImagePath = `images/${currentFolderName}/${nextImageFilename}`;

            // Change the image source
            modalImage.src = nextImagePath;

            // Force a reflow to restart the animation
            void modalImage.offsetWidth;

            // Fade-in new image
            modalImage.classList.remove('fade-out');
            modalImage.classList.add('fade-in');
          }, 300); // Matches the CSS transition time
      }

      window.closeModal = closeModal;
      window.navigateImage = navigateImage;

      window.switchImages = function(folderName) 
      {
        const tabs = document.querySelectorAll('.tab');

        tabs.forEach(tab => tab.classList.remove('active'));
        tabs.forEach(tab => {
          if (tab.getAttribute('onclick').includes(folderName)) {
            tab.classList.add('active');
          }
        });

        const descriptions = {
          'Alta-NaturalWovenShades': 
            "<span style='font-size: 2em; color: #98760b;'>Natural Woven Shades</span><br /><br />Natural Woven Shades offer a warm and organic look for your windows. They are crafted from natural materials, adding a touch of nature to your home decor.",
          'Norman-Shutters': 
            "<span style='font-size: 2em; color: #98760b;'>Shutters</span><br /><br />Shutters provide timeless elegance and excellent light control.",
          'Alta-RollerShades': 
            "<span style='font-size: 2em; color: #98760b;'>Roller Shades</span><br /><br />Roller Shades are sleek, modern, and perfect for any room."
        };
        description.innerHTML = descriptions[folderName] || 'Explore our collection of premium window treatments.';

        currentFolderName = folderName;

        fetch(`http://localhost:3000/api/images/${folderName}`)
          .then(response => {
            console.log(`Fetched response status for "${folderName}":`, response.status);
            if (!response.ok) {
              throw new Error(`Failed to load images for folder: ${folderName}`);
            }
            return response.json();
          })
          .then(images => {
            console.log(`Images received for "${folderName}":`, images);
            renderGrid(images);
          })
          .catch(error => {
            console.error(`Fetch error for folder "${folderName}":`, error);
            gridContainer.innerHTML = `
              <p style="text-align: center; color: #c00;">
          Gallery temporarily unavailable. Please try again later.
              </p>`;
          });

      };

      // Click outside the modal image to close
      modal.addEventListener('click', (event) => {
        const modalImage = document.getElementById('modal-image');
        const isModalImage = event.target === modalImage;
        const isArrowButton = event.target.classList.contains('modal-arrow');

        // If clicked NOT on image and NOT on arrows, close
        if (!isModalImage && !isArrowButton) {
          closeModal();
        }
      });

      // Close modal when ESC key is pressed
      document.addEventListener('keydown', (event) => {
        const modal = document.getElementById('image-modal');

        if (modal.style.display === 'flex') { // Only when modal is open
          if (event.key === 'Escape') {
            closeModal();
          } else if (event.key === 'ArrowRight') {
            navigateImage(1); // Go to next image
          } else if (event.key === 'ArrowLeft') {
            navigateImage(-1); // Go to previous image
          }
        }     
      });

      // Initialize gallery
      switchImages('Alta-NaturalWovenShades');
    });

  </script>

  <!-- Structured Data (SEO) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    "name": "Blind and Shutter Shop by Laura Interiors",
    "description": "Premium blinds, shutters, and shades in Southlake, TX.",
    "url": "https://blindandshuttershop.com",
    "telephone": "+18177348572",
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "Southlake",
      "addressRegion": "TX",
      "postalCode": "76092",
      "addressCountry": "US"
    },
    "image": "https://blindandshuttershop.com/LauraInteriorsLogo.png",
    "priceRange": "$$"
  }
  </script>
</body>
</html>
